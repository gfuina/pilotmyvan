import mongoose from 'mongoose';
import { config } from 'dotenv';
import { fileURLToPath } from 'url';
import { dirname, join } from 'path';

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

// Load environment variables from .env
const envPath = join(__dirname, '../.env');
config({ path: envPath });

// Connect to MongoDB
await mongoose.connect(process.env.MONGODB_URI);
console.log('‚úÖ Connected to MongoDB');

// Define schemas
const EquipmentSchema = new mongoose.Schema({
  name: String,
  description: String,
  categoryId: mongoose.Schema.Types.ObjectId,
  vehicleBrands: [mongoose.Schema.Types.ObjectId],
  equipmentBrands: [mongoose.Schema.Types.ObjectId],
  photos: [String],
  manuals: [{
    title: String,
    url: String,
    isExternal: Boolean,
  }],
  notes: String,
  isUserContributed: Boolean,
  contributedBy: mongoose.Schema.Types.ObjectId,
  status: String,
  approvedBy: mongoose.Schema.Types.ObjectId,
  approvedAt: Date,
  rejectionReason: String,
}, { timestamps: true });

const MaintenanceSchema = new mongoose.Schema({
  equipmentId: mongoose.Schema.Types.ObjectId,
  name: String,
  type: String,
  priority: String,
  difficulty: String,
  recurrence: {
    time: {
      value: Number,
      unit: String,
    },
    kilometers: Number,
  },
  conditions: [String],
  description: String,
  instructions: String,
  photos: [String],
  videos: [String],
  parts: [{
    name: String,
    reference: String,
    quantity: Number,
    estimatedCost: Number,
    purchaseLink: String,
  }],
  estimatedDuration: Number,
  estimatedCost: Number,
  tags: [String],
  isOfficial: Boolean,
  source: String,
  isUserContributed: Boolean,
  contributedBy: mongoose.Schema.Types.ObjectId,
  status: String,
}, { timestamps: true });

const Equipment = mongoose.models.Equipment || mongoose.model('Equipment', EquipmentSchema);
const Maintenance = mongoose.models.Maintenance || mongoose.model('Maintenance', MaintenanceSchema);

try {
  // Category ID pour "R√©frig√©rateur (√† compression, absorption)"
  const categoryId = new mongoose.Types.ObjectId('68f35043be04ebdaad786b5e');

  // Cr√©er l'√©quipement "R√©frig√©rateur domestique"
  const frigoDomestique = await Equipment.create({
    name: 'R√©frig√©rateur domestique (220V)',
    description: 'R√©frig√©rateur de type domestique install√© dans un van ou camping-car, fonctionnant sur secteur 220V via onduleur. Solution √©conomique avec grande capacit√© de stockage, mais n√©cessite une installation √©lectrique adapt√©e (onduleur puissant, batterie cons√©quente). Non con√ßu √† l\'origine pour usage mobile : sensible aux vibrations et √† l\'inclinaison.',
    categoryId: categoryId,
    vehicleBrands: [],
    equipmentBrands: [],
    photos: [],
    manuals: [],
    notes: 'N√©cessite onduleur pur sinus 1000-1500W et batterie lithium cons√©quente. Pr√©f√©rer mod√®les basse consommation (A+++). Installation fixe indispensable.',
    isUserContributed: false,
    status: 'approved',
  });

  console.log(`‚úÖ √âquipement cr√©√©: ${frigoDomestique.name} (ID: ${frigoDomestique._id})`);

  // Cr√©er les maintenances associ√©es
  const maintenances = [
    {
      equipmentId: frigoDomestique._id,
      name: 'V√©rification de la mise √† niveau',
      type: 'inspection',
      priority: 'critical',
      difficulty: 'easy',
      recurrence: {
        time: {
          value: 3,
          unit: 'months',
        },
      },
      conditions: [
        'Apr√®s conduite sur route difficile',
        'Si bruits anormaux du compresseur',
        'Si porte ferme mal',
      ],
      description: 'Contr√¥le crucial de la mise √† niveau du frigo pour assurer le bon fonctionnement du compresseur et l\'√©tanch√©it√© de la porte.',
      instructions: '‚ö†Ô∏è CRITIQUE POUR FRIGO DOMESTIQUE EN VAN\n\n1. V√©rifier avec un niveau √† bulle :\n   - Poser le niveau sur le dessus du frigo\n   - Avant/arri√®re\n   - Gauche/droite\n2. Niveau requis :\n   - Parfaitement horizontal = ID√âAL\n   - Tol√©rance max : 2-3¬∞ (selon fabricant)\n   - Au-del√† : risque pour le compresseur\n3. Ajuster si n√©cessaire :\n   - Utiliser des cales sous les pieds\n   - Ajuster les pieds r√©glables\n   - V√©rifier apr√®s ajustement\n4. Tester la porte :\n   - Doit se fermer d\'elle-m√™me √† 45¬∞\n   - Si reste ouverte = mauvais niveau\n5. V√©rifier apr√®s conduite :\n   - Vibrations peuvent d√©r√©gler le niveau\n   - Contr√¥le syst√©matique recommand√©\n\nüö® DANGER : Frigo non de niveau = \n   - Compresseur endommag√©\n   - Dur√©e de vie r√©duite\n   - Performances d√©grad√©es\n   - Consommation excessive\n\nüí° Un frigo domestique N\'EST PAS con√ßu pour bouger',
      photos: [],
      videos: [],
      parts: [],
      estimatedDuration: 10,
      estimatedCost: 0,
      tags: ['Niveau', 'Compresseur', 'Critical', 'Installation'],
      isOfficial: true,
      source: 'Recommandations fabricants',
      isUserContributed: false,
      status: 'approved',
    },
    {
      equipmentId: frigoDomestique._id,
      name: 'Contr√¥le de la fixation et anti-vibrations',
      type: 'inspection',
      priority: 'critical',
      difficulty: 'intermediate',
      recurrence: {
        time: {
          value: 3,
          unit: 'months',
        },
      },
      conditions: [
        'Apr√®s conduite sur piste',
        'Si bruits/vibrations anormaux',
        'Avant long voyage',
      ],
      description: 'V√©rification de la fixation du frigo et des syst√®mes anti-vibrations pour prot√©ger le compresseur.',
      instructions: '‚ö†Ô∏è FRIGO DOMESTIQUE = FRAGILE AUX VIBRATIONS\n\n1. V√©rifier le syst√®me de fixation :\n   - Sangles de maintien serr√©es\n   - Cales lat√©rales bien positionn√©es\n   - Fixations arri√®re s√©curis√©es\n   - Frigo ne bouge PAS du tout\n2. Tester la stabilit√© :\n   - Pousser le frigo : aucun mouvement\n   - V√©rifier tous les c√¥t√©s\n3. Syst√®me anti-vibrations :\n   - Tapis/mousse anti-vibrations sous le frigo\n   - Amortisseurs si install√©s\n   - √âtat des supports\n4. V√©rifier les espacements :\n   - 5-10 cm sur les c√¥t√©s (ventilation)\n   - 10 cm √† l\'arri√®re\n   - Frigo ne touche pas les parois\n5. Protections int√©rieures :\n   - Clayettes bien enclench√©es\n   - Bacs fix√©s\n   - Rien ne peut bouger √† l\'int√©rieur\n6. Contr√¥ler les bruits :\n   - Compresseur ne vibre pas excessivement\n   - Pas de cliquetis m√©tallique\n   - Pas de frottement\n\nüö® Vibrations = ennemi n¬∞1 du compresseur domestique\nüí° Utiliser des mousses haute densit√©\nüí° √âviter les pistes trop difficiles si possible',
      photos: [],
      videos: [],
      parts: [
        {
          name: 'Tapis anti-vibrations',
          reference: 'Mousse haute densit√©',
          quantity: 1,
          estimatedCost: 20,
        },
      ],
      estimatedDuration: 20,
      estimatedCost: 0,
      tags: ['Fixation', 'Vibrations', 'Compresseur', 'Critical'],
      isOfficial: true,
      source: 'Adaptation van/camping-car',
      isUserContributed: false,
      status: 'approved',
    },
    {
      equipmentId: frigoDomestique._id,
      name: 'V√©rification onduleur et alimentation 220V',
      type: 'test',
      priority: 'critical',
      difficulty: 'intermediate',
      recurrence: {
        time: {
          value: 3,
          unit: 'months',
        },
      },
      conditions: [
        'Si coupures fr√©quentes',
        'Si onduleur chauffe',
        'Si frigo ne d√©marre pas',
      ],
      description: 'Contr√¥le de l\'onduleur et de l\'alimentation √©lectrique n√©cessaire au fonctionnement du frigo 220V.',
      instructions: '‚ö†Ô∏è FRIGO DOMESTIQUE = ONDULEUR PUISSANT REQUIS\n\n1. V√©rifier les specs de l\'onduleur :\n   - Puissance : minimum 1000W continu\n   - Type : OBLIGATOIRE pur sinus\n   - Pic de d√©marrage : 2000-3000W (compresseur)\n2. Tester la tension de sortie :\n   - Utiliser un multim√®tre\n   - Doit afficher 220-230V stable\n   - Pas de fluctuations importantes\n3. Contr√¥ler la consommation du frigo :\n   - Mesurer avec wattm√®tre\n   - D√©marrage compresseur : 400-800W (pic)\n   - En fonctionnement : 80-150W\n   - Comparer aux specs\n4. V√©rifier l\'√©tat de la batterie :\n   - Capacit√© suffisante (200Ah lithium min)\n   - Tension de batterie stable\n   - Pas de chute de tension au d√©marrage\n5. Inspection des connexions :\n   - C√¢bles batterie vers onduleur (section 25-35mm¬≤)\n   - Serrage des cosses\n   - Absence de chauffe\n   - Fusibles appropri√©s (150-200A)\n6. Protection de l\'onduleur :\n   - Ventilation correcte\n   - Pas de surchauffe\n   - Alarmes fonctionnelles\n7. Tester en situation r√©elle :\n   - D√©marrage compresseur OK\n   - Pas de coupure onduleur\n   - Autonomie acceptable\n\nüí° Consommation frigo domestique : 50-80Ah/24h\nüö® Onduleur modifi√© = risque pour le compresseur\nüí° Pr√©f√©rer frigos basse conso (A+++ = 0,5kWh/24h)',
      photos: [],
      videos: [],
      parts: [],
      estimatedDuration: 30,
      estimatedCost: 0,
      tags: ['Onduleur', '220V', '√âlectrique', 'Critical', 'Batterie'],
      isOfficial: true,
      source: 'Installation √©lectrique van',
      isUserContributed: false,
      status: 'approved',
    },
    {
      equipmentId: frigoDomestique._id,
      name: 'Nettoyage int√©rieur du r√©frig√©rateur',
      type: 'cleaning',
      priority: 'important',
      difficulty: 'easy',
      recurrence: {
        time: {
          value: 1,
          unit: 'months',
        },
      },
      conditions: [
        'Si odeurs d√©sagr√©ables',
        'En cas de d√©versement',
        'Avant stockage prolong√©',
      ],
      description: 'Nettoyage r√©gulier de l\'int√©rieur du frigo pour maintenir l\'hygi√®ne alimentaire.',
      instructions: '1. Vider le r√©frig√©rateur et le cong√©lateur\n2. D√©brancher ou couper l\'onduleur\n3. Retirer tous les √©l√©ments amovibles :\n   - Clayettes en verre\n   - Bacs √† l√©gumes\n   - Balconnets de porte\n4. Nettoyer l\'int√©rieur :\n   - Eau ti√®de + bicarbonate de soude\n   - Ou vinaigre blanc dilu√©\n   - √âponge douce\n   - Insister dans les recoins\n5. Nettoyer les joints de porte :\n   - Chiffon avec eau savonneuse\n   - Passer dans tous les plis\n   - V√©rifier absence de moisissure\n6. Nettoyer les √©l√©ments amovibles :\n   - Eau savonneuse\n   - Rincer\n   - S√©cher\n7. Nettoyer l\'ext√©rieur et les poign√©es\n8. Laisser s√©cher 15 minutes porte ouverte\n9. Remettre tous les √©l√©ments\n10. Rebrancher\n\nüí° √âviter produits chimiques agressifs\nüí° Bicarbonate = anti-odeurs naturel',
      photos: [],
      videos: [],
      parts: [],
      estimatedDuration: 30,
      estimatedCost: 0,
      tags: ['Nettoyage', 'Hygi√®ne', 'Odeurs'],
      isOfficial: true,
      source: 'Recommandations fabricants',
      isUserContributed: false,
      status: 'approved',
    },
    {
      equipmentId: frigoDomestique._id,
      name: 'Nettoyage du condenseur et grilles arri√®re',
      type: 'cleaning',
      priority: 'important',
      difficulty: 'intermediate',
      recurrence: {
        time: {
          value: 3,
          unit: 'months',
        },
      },
      conditions: [
        'Si frigo chauffe anormalement',
        'Si consommation excessive',
        'Si performances d√©grad√©es',
      ],
      description: 'Nettoyage du condenseur (radiateur arri√®re) pour maintenir l\'efficacit√© de refroidissement.',
      instructions: '‚ö†Ô∏è ESSENTIEL POUR LES PERFORMANCES\n\n1. D√©brancher le frigo (couper onduleur)\n2. Acc√©der √† l\'arri√®re du frigo :\n   - Tirer le frigo si possible\n   - Ou retirer le panneau arri√®re\n3. Localiser le condenseur :\n   - Grille m√©tallique noire √† l\'arri√®re\n   - Serpentin avec ailettes\n4. Aspirer la poussi√®re :\n   - Utiliser un aspirateur avec embout brosse\n   - Passer d√©licatement entre les ailettes\n   - Ne pas plier les ailettes\n5. Brosser si n√©cessaire :\n   - Brosse douce\n   - Mouvements verticaux\n6. Souffler avec air comprim√© (optionnel) :\n   - Pression faible\n   - Expulser poussi√®re tenace\n7. Nettoyer le ventilateur (si √©quip√©) :\n   - Enlever poussi√®re sur les pales\n   - V√©rifier rotation libre\n8. Nettoyer la grille de ventilation ext√©rieure\n9. V√©rifier l\'espace de ventilation (10cm min)\n10. Replacer le frigo ou le panneau\n11. Rebrancher et tester\n\nüí° En van : condenseur s\'encrasse plus vite (poussi√®re route)\nüö® Condenseur encrass√© = +30% consommation\nüí° Nettoyer plus souvent en √©t√©',
      photos: [],
      videos: [],
      parts: [],
      estimatedDuration: 30,
      estimatedCost: 0,
      tags: ['Condenseur', 'Nettoyage', 'Performance', 'Ventilation'],
      isOfficial: true,
      source: 'Recommandations fabricants',
      isUserContributed: false,
      status: 'approved',
    },
    {
      equipmentId: frigoDomestique._id,
      name: 'D√©givrage du cong√©lateur',
      type: 'cleaning',
      priority: 'important',
      difficulty: 'easy',
      recurrence: {
        time: {
          value: 3,
          unit: 'months',
        },
      },
      conditions: [
        'Si couche de givre > 5mm',
        'Si porte du freezer ferme mal',
        'Si performances d√©grad√©es',
      ],
      description: 'D√©givrage du compartiment cong√©lateur pour maintenir les performances √©nerg√©tiques.',
      instructions: '1. Vider le cong√©lateur\n2. Transf√©rer aliments congel√©s (glaci√®re avec pains de glace)\n3. D√©brancher le frigo (couper onduleur)\n4. Laisser porte du freezer ouverte\n5. Placer des serviettes au fond\n6. Laisser d√©geler naturellement (2-4h) :\n   - Option : bol d\'eau chaude dans le freezer (acc√©l√®re)\n   - NE JAMAIS gratter avec objet dur\n   - NE JAMAIS utiliser s√®che-cheveux\n7. R√©cup√©rer l\'eau de fonte :\n   - Essuyer r√©guli√®rement\n   - Vider le bac r√©cup√©rateur si √©quip√©\n8. Nettoyer le freezer (eau + bicarbonate)\n9. Bien s√©cher\n10. Rebrancher\n11. Attendre retour temp√©rature avant de recharger\n\nüí° Givre √©pais = +50% consommation freezer\nüí° Si frigo No-Frost : d√©givrage automatique (rare en van)\n‚ö†Ô∏è Planifier quand alimentations riches disponibles\nüí° Dur√©e totale : 3-4h',
      photos: [],
      videos: [],
      parts: [],
      estimatedDuration: 240,
      estimatedCost: 0,
      tags: ['D√©givrage', 'Cong√©lateur', 'Freezer', 'Performance'],
      isOfficial: true,
      source: 'Recommandations fabricants',
      isUserContributed: false,
      status: 'approved',
    },
    {
      equipmentId: frigoDomestique._id,
      name: 'Contr√¥le du joint de porte',
      type: 'inspection',
      priority: 'important',
      difficulty: 'easy',
      recurrence: {
        time: {
          value: 6,
          unit: 'months',
        },
      },
      conditions: [
        'Si condensation excessive',
        'Si porte ferme mal',
        'Si givre anormal',
      ],
      description: 'V√©rification de l\'√©tanch√©it√© des joints de porte du r√©frig√©rateur et du cong√©lateur.',
      instructions: '1. Test visuel du joint :\n   - Pas de craquelures\n   - Pas de d√©chirures\n   - Souplesse conserv√©e\n   - Propret√© (pas de moisissure)\n2. Test d\'√©tanch√©it√© :\n   - M√©thode 1 : Feuille de papier\n   - Fermer la porte sur une feuille\n   - Tirer : doit r√©sister\n   - Tester sur tout le p√©rim√®tre\n   - M√©thode 2 : Lampe torche\n   - Mettre lampe allum√©e dans frigo\n   - Fermer porte, √©teindre lumi√®re pi√®ce\n   - Si lumi√®re visible = fuite\n3. Nettoyer le joint :\n   - Eau savonneuse ti√®de\n   - Passer dans tous les plis\n   - Bien s√©cher\n4. Si joint sec/dur :\n   - Appliquer talc ou vaseline\n   - Redonne souplesse\n5. V√©rifier l\'alignement de la porte :\n   - Charni√®res serr√©es\n   - Porte bien droite\n6. Si joint d√©faillant :\n   - Commander r√©f√©rence exacte\n   - Remplacement facile (clips ou colle)\n\nüí° Joint d√©faillant = +25% consommation\nüí° Vibrations du van peuvent user les joints plus vite',
      photos: [],
      videos: [],
      parts: [
        {
          name: 'Joint de porte frigo',
          reference: 'Selon mod√®le exact',
          quantity: 1,
          estimatedCost: 40,
        },
      ],
      estimatedDuration: 20,
      estimatedCost: 0,
      tags: ['Joint', '√âtanch√©it√©', 'Condensation', 'Performance'],
      isOfficial: true,
      source: 'Recommandations fabricants',
      isUserContributed: false,
      status: 'approved',
    },
    {
      equipmentId: frigoDomestique._id,
      name: 'V√©rification des r√©glages temp√©rature',
      type: 'test',
      priority: 'recommended',
      difficulty: 'easy',
      recurrence: {
        time: {
          value: 3,
          unit: 'months',
        },
      },
      conditions: [
        'Changement de saison',
        'Si temp√©rature instable',
        'Si consommation anormale',
      ],
      description: 'Contr√¥le et ajustement des temp√©ratures pour optimiser conservation et consommation.',
      instructions: '1. Mesurer la temp√©rature r√©elle :\n   - Thermom√®tre au centre du frigo\n   - Attendre 4-6h apr√®s fermeture\n   - Temp√©rature id√©ale : 4-5¬∞C\n2. Cong√©lateur :\n   - Thermom√®tre au centre\n   - Temp√©rature id√©ale : -18¬∞C\n3. Ajuster si n√©cessaire :\n   - Molette de r√©glage (1-7 g√©n√©ralement)\n   - Position moyenne souvent optimale\n   - Attendre 24h entre ajustements\n4. Optimiser selon saison :\n   - √ât√©/chaleur : r√©glage plus fort\n   - Hiver/froid : r√©glage plus faible\n5. V√©rifier la consommation :\n   - Mesurer avec wattm√®tre\n   - Comparer aux specs fabricant\n   - Frigo A+++ : 0,5-0,7 kWh/24h\n6. Conseils d\'optimisation :\n   - Ne pas surcharger (air doit circuler)\n   - Laisser refroidir aliments avant rangement\n   - Limiter ouvertures prolong√©es\n   - Organiser pour limiter recherches\n\nüí° Temp√©rature trop basse = gaspillage √©nergie\nüí° 4¬∞C = temp√©rature optimale conservation\nüí° √âconomie : -1¬∞C = +5% consommation',
      photos: [],
      videos: [],
      parts: [],
      estimatedDuration: 15,
      estimatedCost: 0,
      tags: ['Temp√©rature', 'R√©glage', 'Performance', 'Consommation'],
      isOfficial: true,
      source: 'Bonnes pratiques',
      isUserContributed: false,
      status: 'approved',
    },
    {
      equipmentId: frigoDomestique._id,
      name: 'Gestion √©lectrique et autonomie',
      type: 'service',
      priority: 'critical',
      difficulty: 'advanced',
      recurrence: {
        time: {
          value: 6,
          unit: 'months',
        },
      },
      conditions: [
        'Si autonomie insuffisante',
        'Si batterie se d√©charge trop vite',
        'Changement de saison',
      ],
      description: 'Optimisation de la gestion √©lectrique pour maximiser l\'autonomie avec un frigo domestique.',
      instructions: '‚ö†Ô∏è FRIGO DOMESTIQUE = GROS CONSOMMATEUR\n\n1. Calculer la consommation r√©elle :\n   - Mesurer sur 24h avec wattm√®tre\n   - Calculer en Ah (Wh √∑ tension batterie)\n   - Ex: 600Wh/jour √∑ 12V = 50Ah/jour\n2. V√©rifier la capacit√© batterie :\n   - Lithium recommand√© (200-400Ah)\n   - AGM possible mais capacit√© x2 n√©cessaire\n   - Profondeur d√©charge max 80% (lithium)\n3. Calculer l\'autonomie :\n   - (Capacit√© batterie x 0,8) √∑ Consommation frigo\n   - Ex: (300Ah x 0,8) √∑ 50Ah = 4,8 jours\n4. Solutions si autonomie insuffisante :\n   - Augmenter capacit√© batterie\n   - Ajouter panneaux solaires (400-800W)\n   - Recharge alternateur am√©lior√©e\n   - Brancher sur secteur d√®s que possible\n5. Optimisations :\n   - Thermostat intelligent (coupure batterie basse)\n   - Minuterie (arr√™t nocturne si possible)\n   - Isolation renforc√©e du frigo\n6. Surveillance :\n   - Moniteur de batterie (shunt)\n   - Alarme batterie basse\n   - Suivi consommation journali√®re\n7. Mode √©conomie d\'√©nergie :\n   - Temp√©rature moins froide en hiver\n   - Remplir au maximum (inertie thermique)\n   - Pr√©-refroidir les aliments\n\nüí° Budget √©lectrique frigo domestique :\n   - Frigo A+++ : 50-80Ah/24h\n   - Batterie lithium 300Ah minimum\n   - Solaire 400W minimum\nüö® Sans solaire cons√©quent = frigo sur secteur uniquement\nüí° Alternative : passer √† glaci√®re √† compression (20-45Ah/24h)',
      photos: [],
      videos: [],
      parts: [],
      estimatedDuration: 60,
      estimatedCost: 0,
      tags: ['√âlectrique', 'Autonomie', 'Batterie', 'Consommation', 'Solaire'],
      isOfficial: true,
      source: 'Installation √©lectrique van',
      isUserContributed: false,
      status: 'approved',
    },
    {
      equipmentId: frigoDomestique._id,
      name: 'Hivernage et stockage longue dur√©e',
      type: 'service',
      priority: 'recommended',
      difficulty: 'easy',
      recurrence: {
        time: {
          value: 1,
          unit: 'years',
        },
      },
      conditions: [
        'Avant stockage hivernal',
        'Si inutilisation > 1 mois',
      ],
      description: 'Pr√©paration du frigo pour une p√©riode d\'immobilisation prolong√©e du v√©hicule.',
      instructions: '1. Vider compl√®tement frigo et cong√©lateur\n2. D√©brancher (couper onduleur)\n3. D√©givrer le freezer compl√®tement\n4. Nettoyage complet :\n   - Int√©rieur frigo et freezer\n   - Clayettes et bacs\n   - Joints\n   - Ext√©rieur\n5. S√©cher parfaitement :\n   - Essuyer toute humidit√©\n   - Laisser porte ouverte 24h\n6. Neutraliser odeurs :\n   - Bol de bicarbonate √† l\'int√©rieur\n   - Ou charbon actif\n   - Ou boule de papier journal\n7. Laisser portes entrouvertes :\n   - Frigo et freezer\n   - Caler avec un chiffon\n   - √âvite moisissures et odeurs\n8. Prot√©ger si n√©cessaire :\n   - Couvrir pour √©viter poussi√®re\n9. V√©rifier fixation pour stockage\n10. D√©brancher onduleur compl√®tement\n\nüí° Avant remise en service :\n   - Nettoyer √† nouveau\n   - V√©rifier niveau et fixation\n   - Faire tourner √† vide 2h\n   - V√©rifier temp√©rature avant de charger\nüí° Si stockage dans le froid :\n   - Pas de risque (frigo √©teint)\n   - Mais v√©rifier niveau au red√©marrage',
      photos: [],
      videos: [],
      parts: [],
      estimatedDuration: 60,
      estimatedCost: 0,
      tags: ['Hivernage', 'Stockage', 'Moisissure', 'Conservation'],
      isOfficial: true,
      source: 'Bonnes pratiques',
      isUserContributed: false,
      status: 'approved',
    },
  ];

  // Ins√©rer toutes les maintenances
  const insertedMaintenances = await Maintenance.insertMany(maintenances);
  console.log(`‚úÖ ${insertedMaintenances.length} maintenances cr√©√©es`);

  // Afficher le r√©sum√©
  console.log('\nüìä R√©sum√© de l\'insertion:');
  console.log('‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ');
  console.log(`√âquipement: ${frigoDomestique.name}`);
  console.log(`ID: ${frigoDomestique._id}`);
  console.log('\nMaintenances:');
  insertedMaintenances.forEach((m, i) => {
    console.log(`  ${i + 1}. ${m.name} (${m.type} - ${m.priority})`);
  });
  console.log('‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ');
  console.log('\n‚ö†Ô∏è  SP√âCIFICIT√âS FRIGO DOMESTIQUE EN VAN :');
  console.log('   ‚Ä¢ CRITIQUE : Mise √† niveau parfaite requise');
  console.log('   ‚Ä¢ CRITIQUE : Fixation anti-vibrations indispensable');
  console.log('   ‚Ä¢ CRITIQUE : Onduleur pur sinus 1000W minimum');
  console.log('   ‚Ä¢ Batterie lithium 200-400Ah recommand√©e');
  console.log('   ‚Ä¢ Consommation : 50-80Ah/24h (vs 20-45Ah glaci√®re)');
  console.log('   ‚Ä¢ Solaire 400W+ fortement conseill√©');
  console.log('   ‚Ä¢ Non con√ßu pour usage mobile = fragile');

} catch (error) {
  console.error('‚ùå Erreur lors de l\'insertion:', error);
} finally {
  await mongoose.disconnect();
  console.log('\n‚úÖ D√©connect√© de MongoDB');
}

